# 民歌情感分析评分系统

本项目为"兆易创新杯"第十九届中国研究生电子设计竞赛参赛作品，通过引入AI情感分析技术，对传统民歌演唱评分系统进行创新升级。

## 创新亮点

1. **本地化情感分析**: 无需云服务或API，完全本地部署的AI模型，解决网络依赖、时延和额外成本问题
2. **多维情感识别**: 基于预训练的语音情感识别模型，识别六种基本情感（欢快、悲伤、平静、愤怒、恐惧、厌恶）
3. **民歌情感映射**: 建立民歌与情感特征的映射关系，评估演唱者情感表达与歌曲风格的契合度
4. **直观可视化**: 情感雷达图直观展示情感分布，便于演唱者理解自己的情感表达
5. **综合评分系统**: 结合传统音准评分与情感表达评分，提供更全面的演唱能力评估

## 技术方案

### 核心技术

- 基于**wav2vec2**的语音情感识别模型
- 本地部署的深度学习推理引擎
- 民歌情感特征数据库
- 情感雷达图可视化

### 系统架构

```
┌──────────────────┐     ┌─────────────────┐     ┌────────────────┐
│  音频输入模块    │────>│  情感识别模块   │────>│  评分计算模块  │
└──────────────────┘     └─────────────────┘     └────────────────┘
       ↑                        │                       │
       │                        ↓                       ↓
┌──────────────────┐     ┌─────────────────┐     ┌────────────────┐
│  用户界面模块    │<────│  结果可视化模块 │<────│  民歌特征数据库│
└──────────────────┘     └─────────────────┘     └────────────────┘
```

## 使用说明

### 安装要求

- Python 3.8+
- PyTorch 1.9+
- transformers 4.30+
- 其他依赖(见requirements.txt)

### 快速安装

```bash
# 克隆仓库
git clone https://github.com/your-username/folk-song-emotion.git
cd folk-song-emotion

# 安装依赖
pip install -r requirements.txt

# 运行应用(界面版)
python run_analyzer.py

# 或运行简化版演示
python demo_simple.py
```

### 首次运行

首次运行时，系统会自动下载预训练模型（约500MB），请确保网络连接正常。下载完成后，模型将保存在本地，后续使用无需再次下载。

## 项目文件结构

```
folk-song-emotion/
├── emotion_folk_analyzer.py  # 主程序(GUI版)
├── demo_simple.py            # 简化演示版
├── run_analyzer.py           # 启动脚本
├── requirements.txt          # 依赖列表
├── local_model/              # 本地模型文件夹(自动创建)
└── README.md                 # 项目说明
```

## 支持的民歌

当前系统内置了以下民歌的情感特征映射：

1. 茉莉花
2. 康定情歌
3. 走西口
4. 半个月亮爬上来
5. 大漠之歌
6. 黄土高坡

可以通过修改代码中的`song_emotion_map`字典轻松添加更多民歌。

## 技术实现细节

### 模型选型

选用Hugging Face上的预训练语音情感识别模型**wav2vec2-base-superb-er**：
- 支持多种情感识别
- 适合中文语音处理
- 模型体积适中，便于本地部署
- 推理速度快，满足比赛演示需求

### 评分算法

系统评分算法由两部分组成：
1. **基础音准评分**: 由传统系统提供(本演示中模拟)
2. **情感匹配评分**: 计算演唱情感与歌曲情感标准的匹配度

最终得分计算公式：`最终分数 = 基础分数 × 0.7 + 情感匹配分数 × 100 × 0.3`

## 扩展方向

1. 添加更多民歌和对应的情感特征数据
2. 引入音色分析功能
3. 实现歌词时间轴对齐，提供逐句评分
4. 加入方言识别支持，提升地方民歌评估准确性
5. 开发移动端应用

## 参赛团队

- 指导教师：[教师姓名]
- 参赛学生：[学生姓名]

## 许可证

[选择适合的许可证]
